---
builders:
- name: builder
  image: ekidd/rust-musl-builder
  adds:
  - "."
  script:
  - ls -al
  - cargo build --release
  - cp target/x86_64-unknown-linux-musl/release/dofigen ../
  caches:
  - "/usr/local/cargo/registry"
  - "/home/rust/src/target"
image: scratch
workdir: /app
artifacts:
- builder: builder
  source: "/home/rust/dofigen"
  destination: "/"
entrypoint: 
- /dofigen
ignores:
- target