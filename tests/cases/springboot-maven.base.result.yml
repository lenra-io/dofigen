context:
- /pom.xml
- /src/main/
builders:
- name: maven-builder
  from:
    path: maven
    tag: 3.9-eclipse-temurin-17-alpine
  workdir: /app
  copy:
  - paths:
    - .
  root:
    run:
    - mvn package -DskipTests
    - mv target/*.jar app.jar
    cache:
    - target: /root/.m2
    - target: /app/target
from:
  path: eclipse-temurin
  tag: 17-jre-alpine
copy:
- from: maven-builder
  paths:
  - /app/app.jar
  target: app.jar
cmd:
- java
- -jar
- app.jar
