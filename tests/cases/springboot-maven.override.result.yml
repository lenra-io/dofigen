context:
- /pom.xml
- /src/main/
builders:
- name: maven-builder
  from:
    path: maven
    tag: 3-eclipse-temurin-21-alpine
  workdir: /app
  copy:
  - paths:
    - .
  root:
    run:
    - mvn package -DskipTests
    - mv target/*.jar app.jar
    cache:
    - /root/.m2
    - /app/target
from:
  path: eclipse-temurin
  tag: 21-jre-alpine
artifacts:
- builder: maven-builder
  source: /app/app.jar
  target: app.jar
cmd:
- java
- -jar
- app.jar
