builders:
  maven-builder:
    fromImage: 
      path: maven
      tag: 3.9-eclipse-temurin-17-alpine
    workdir: /app
    add:
      - paths: ["."]
    root:
      run:
        - mvn package -DskipTests
        - mv target/*.jar app.jar
      cache:
        - target: /root/.m2
        - target: /app/target
fromImage: 
  path: eclipse-temurin
  tag: 17-jre-alpine
artifacts:
  - fromBuilder: maven-builder
    source: 
      - /app/app.jar
    target: app.jar
cmd: ["java","-jar","app.jar"]
context:
  - /pom.xml
  - /src/main/